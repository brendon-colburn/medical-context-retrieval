# ======================================
# Medical Context Retrieval - Environment Configuration
# ======================================
# Copy this file to '.env' and update with your actual values
# DO NOT commit the real .env file with actual credentials to version control!

# ======================================
# REQUIRED: Azure OpenAI Configuration
# ======================================
# Get these values from your Azure OpenAI service in the Azure portal

# Your Azure OpenAI service endpoint (e.g., https://your-service.openai.azure.com/)
AZURE_OPENAI_ENDPOINT=https://your-openai-service.openai.azure.com/

# Your Azure OpenAI API key (found in Azure portal > Keys and Endpoint)
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here

# Azure OpenAI API version (leave as default unless you need a specific version)
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# ======================================
# REQUIRED: Model Configuration
# ======================================
# The deployment names of your models in Azure OpenAI

# Embedding model deployment name (e.g., text-embedding-3-large, text-embedding-ada-002)
AOAI_EMBED_MODEL=text-embedding-3-large

# Chat/completion model deployment name (e.g., gpt-4, gpt-35-turbo, gpt-4o-mini)
AOAI_CHAT_MODEL=gpt-5-mini

# ======================================
# OPTIONAL: Performance Tuning
# ======================================
# Advanced settings - only modify if you know what you're doing

# Rate limiting (requests per minute)
REQUESTS_PER_MIN=60

# Token limits (tokens per minute)
TOKENS_PER_MIN=60000

# Estimated tokens per request for rate limiting calculations
EST_TOKENS_PER_REQUEST=200

# ======================================
# OPTIONAL: Content Processing
# ======================================
# Fine-tune how content is processed and chunked

# Maximum words for semantic processing
SEMANTIC_MAX_WORDS=300

# Maximum characters for headers
HEADER_MAX_CHARS=200

# Enable advanced header processing (1 = enabled, 0 = disabled)
HEADER_ADVANCED=1

# Header chunk processing settings
HEADER_CHUNK_HEAD=850
HEADER_CHUNK_TAIL=350
HEADER_NEIGHBOR_CHARS=140
HEADER_DOC_SUMMARY_CHARS=600
HEADER_KEYWORD_COUNT=12

# ======================================
# OPTIONAL: Development/Debug Settings
# ======================================
# Set to "1" to enable zero embeddings on missing content (for testing)
EMBED_ZERO_ON_MISSING=0

# ======================================
# AZURE AI SEARCH (for vector search - replaces FAISS)
# ======================================
# Azure AI Search service endpoint
AZURE_SEARCH_ENDPOINT=https://medctx-demo-search.search.windows.net

# Azure AI Search admin key (found in Azure portal > AI Search > Keys)
AZURE_SEARCH_KEY=your_azure_search_admin_key_here

# Index name for medical context vectors
AZURE_SEARCH_INDEX_NAME=medical-context-index

# ======================================
# AZURE COSMOS DB (for document/chunk storage - replaces local JSON)
# ======================================
# Cosmos DB account endpoint
COSMOS_ENDPOINT=https://medctx-demo-cosmos.documents.azure.com:443/

# Cosmos DB primary key (found in Azure portal > Cosmos DB > Keys)
COSMOS_KEY=your_cosmos_db_primary_key_here

# Database name
COSMOS_DB_NAME=medical-context-db

# Container names
COSMOS_CONTAINER_DOCUMENTS=documents
COSMOS_CONTAINER_CHUNKS=chunks

# ======================================
# STORAGE MODE
# ======================================
# Options: 'local' (FAISS + JSON files) or 'azure' (Azure Search + Cosmos DB)
# Use 'local' for development/testing, 'azure' for production
STORAGE_MODE=local

# ======================================
# SETUP INSTRUCTIONS:
# ======================================
# 1. Copy this file: cp .env.example .env
# 2. Get Azure OpenAI credentials from Azure portal
# 3. Update AZURE_OPENAI_ENDPOINT with your service URL
# 4. Update AZURE_OPENAI_API_KEY with your API key
# 5. Update AOAI_EMBED_MODEL with your embedding model deployment name
# 6. Update AOAI_CHAT_MODEL with your chat model deployment name
# 7. (Optional) Configure Azure AI Search for cloud-based vector search
# 8. (Optional) Configure Cosmos DB for cloud-based document storage
# 9. Set STORAGE_MODE to 'azure' when ready to use cloud services
# 10. Save the file and run: ./verify_setup.sh